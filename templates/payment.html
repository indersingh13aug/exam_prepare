<!DOCTYPE html>
<html>
<head>
    <title>UPI Payment</title>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 50px;
            width: 500px;
            align-items: center;
        }
        .card {
            border: 1px solid #ddd;
            padding: 30px;
            border-radius: 10px;
            display: inline-block;
        }
        input[type="text"],
        select {
            width: 55%;
            padding: 0.2rem;
            border-radius: 8px;
            border: 1px solid #ccc;
        }
        .nav-buttons {
    text-align: center;
    margin-bottom: 20px;
}

.btn-link {
    display: inline-block;
    margin: 0 10px;
    padding: 8px 16px;
    background-color: #FF4B2B;
    color: white;
    border-radius: 20px;
    text-decoration: none;
    font-weight: bold;
    font-size: 14px;
    transition: background-color 0.3s;
}

.btn-link:hover {
    background-color: #d63a20;
}

       
    </style>
</head>
<body>
    <script>
        function goToPHome() {
            window.location.href = `/home`;
        }
    function validateUPI(upiId) {
        const upiRegex = /^[\w.\-]{2,256}@[a-zA-Z]{2,64}$/;
        return upiRegex.test(upiId);
    }

    function validatePhone(phone) {
        const phoneRegex = /^[6-9]\d{9}$/;
        return phoneRegex.test(phone);
    }

    function startUPIPayment() {
        event.preventDefault(); // prevent form from submitting
        const upiId = document.getElementById('upiId').value.trim();
        const phone = document.getElementById('mobileno').value.trim();
        const amount = parseInt(document.getElementById("amount").value);

        if (!validateUPI(upiId)) {
            alert("Please enter a valid UPI ID (like you@upi)");
            return;
        }

        if (!validatePhone(phone)) {
            alert("Please enter a valid 10-digit mobile number");
            return;
        }

        const options = {
            "key": "rzp_test_wlpMbm4DJpP8dp",  // Use your actual Razorpay test/live key
            "amount": amount * 100, // amount in paise
            "currency": "INR",
            "name": "Upgrade to Pro",
            "description": "UPI Payment",
            "method": {
                "upi": true,
                "card": false,
                "netbanking": false,
                "wallet": false
            },
            "prefill": {
                "contact": phone,
                "email": "user@example.com",
                "method": "upi",
                "upi": {
                    "vpa": upiId
                }
            },
            "handler": function (response){
                alert("Payment Successful!\nPayment ID: " + response.razorpay_payment_id);
            },
            "modal": {
                "ondismiss": function(){
                    alert("Payment cancelled.");
                }
            }
        };

        const rzp = new Razorpay(options);
        rzp.open();
    }

    window.onload = function () {
        const urlParams = new URLSearchParams(window.location.search);
        const amount = parseInt(urlParams.get('amount')) || 0;
        document.getElementById("plan").textContent = amount;
        document.getElementById("amount").value = amount;
    };
</script>


<input type="hidden" id="amount" value="{{ amount }}">
<div class="nav-buttons">
    <a href="javascript:history.back()" class="btn-link">← Back</a>
    <a onclick="goToPHome()" class="btn-link">Home</a>
</div>

<div class="payment-wrapper">
  <div class="payment-form">
    <h2>Pay ₹<span id="plan">{{ amount }}</span> using UPI</h2>
    <form>
      <div class="input-row">
        <label for="mobile">Mobile Number</label>
        <input type="text" id="mobileno" placeholder="Mobile Number">
      </div>
      <div class="input-row">
        <label for="upi">UPI ID</label>
        <input type="text" id="upiId" placeholder="Enter UPI ID (e.g., you@upi)">
      </div>
      <button onclick="startUPIPayment()">Pay with UPI</button> 
    </form>
  </div>
</div>
</body>
</html>



<!-- rzp_test_wlpMbm4DJpP8dp -->